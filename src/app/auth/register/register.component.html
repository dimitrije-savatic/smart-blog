<section class="text-gray-600 body-font login-height">
  <div class="container px-5 py-24 mx-auto flex flex-wrap items-center">
    <div
      class="lg:w-1/2 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:mx-auto w-full mt-10 md:mt-0"
    >
      <h2 class="text-gray-900 text-lg font-medium title-font mb-5">
        Register
      </h2>
      <form [formGroup]="form">
        <div class="relative mb-4">
          <mat-form-field appearance="fill" style="width: 100%">
            <mat-label>First name</mat-label>
            <input matInput [formControl]="form.get('first_name')" />
            <mat-error *ngIf="form.get('first_name').hasError('required')">
              First name is required.
            </mat-error>
            <mat-error *ngIf="form.get('first_name').hasError('minlength')">
              First name has to be at least 3 characters long.
            </mat-error>
            <mat-error *ngIf="form.get('first_name').hasError('maxlength')">
              First name could not be more than 20 characters long.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="relative mb-4">
          <mat-form-field appearance="fill" style="width: 100%">
            <mat-label>Last name</mat-label>
            <input matInput [formControl]="form.get('last_name')" />
            <mat-error *ngIf="form.get('last_name').hasError('required')">
              Last name is required.
            </mat-error>
            <mat-error *ngIf="form.get('last_name').hasError('minlength')">
              Last name has to be at least 3 characters long.
            </mat-error>
            <mat-error *ngIf="form.get('last_name').hasError('maxlength')">
              Last name could not be more than 20 characters long.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="relative mb-4">
          <mat-form-field appearance="fill" style="width: 100%">
            <mat-label>Email</mat-label>
            <input matInput [formControl]="form.get('email')" />
            <mat-error *ngIf="form.get('email').hasError('required')">
              Email is required.
            </mat-error>
            <mat-error *ngIf="form.get('email').hasError('email')">
              Enter valid email.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="relative mb-4">
          <mat-form-field style="width: 100%">
            <mat-label>Password</mat-label>
            <input
              matInput
              [formControl]="form.get('password')"
              [type]="hide ? 'password' : 'text'"
            />
            <mat-error *ngIf="form.get('password').hasError('required')">
              Password is required.
            </mat-error>
            <mat-error *ngIf="form.get('password').hasError('minlength')">
              Password must be at least 5 characters long.
            </mat-error>
            <mat-error *ngIf="form.get('password').hasError('maxlength')">
              Password could not be more than 20 characters long.
            </mat-error>
            <button
              mat-icon-button
              matSuffix
              (click)="hide = !hide"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide"
            >
              <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <div class="relative mb-4">
          <mat-form-field style="width: 100%">
            <mat-label>Confirm password</mat-label>
            <input
              matInput
              [formControl]="form.get('confPassword')"
              [type]="hide ? 'password' : 'text'"
            />
            <mat-error *ngIf="form.get('confPassword').hasError('required')">
              Password confirmation is required.
            </mat-error>
            <mat-error *ngIf="form.get('password').value !== form.get('confPassword').value" >
              Passwords must match.
            </mat-error>
            <button
              mat-icon-button
              matSuffix
              (click)="hide = !hide"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide"
            >
              <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <div class="relative mb-4">
          <mat-checkbox color="primary" [formControl]="form.get('terms')"
            >I read and agreed on
            <span class="text-emerald-500"
              >Terms and Conditions</span
            ></mat-checkbox
          >
        </div>
        <button
          mat-raised-button
          color="primary"
          style="width: 100%"
          (click)="
            register(
              this.form.get('first_name').value,
              this.form.get('last_name').value,
              this.form.get('email').value,
              this.form.get('password').value
            )
          "
          [disabled]="form.invalid"
        >
          Register
        </button>
      </form>
      <app-notification-modal *ngIf="error" [notification]="notificationError" [body]="bodyError" [borderColor]="borderColorError" [buttonColor]="buttonColorError" [newLocation]="location"></app-notification-modal>
      <app-notification-modal *ngIf="success" [notification]="notificationSuccess" [body]="bodySuccess" [borderColor]="borderColorSuccess" [buttonColor]="buttonColorSuccess" [newLocation]="location"></app-notification-modal>
    </div>
  </div>
</section>
